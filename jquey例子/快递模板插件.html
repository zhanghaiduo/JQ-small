<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="http://cdn.static.runoob.com/libs/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="http://cdn.static.runoob.com/libs/jquery/2.1.1/jquery.min.js"></script>
</head>
<style>
    .inputOption .form-control,
    .area {
        width: 80px !important;
        display: inline-block;
        margin-bottom: 5px;
        text-align: center
    }
    
    @media (min-width: 768px) {
        .modal-dialog {
            width: auto;
            max-width: 1200px;
        }
    }
</style>

<body>
    <div class="inputContainer">
        <div class="inputOption">
            <span class="area" href="javascript:;">未添加地区</span>
            <a class="edit btn btn-info" onclick="openModal(this)">编辑</a>
            <input class="firstNumber form-control" type="text" value="" />
            <input class="firstMoney form-control" type="text" value="" />
            <input class="nextNumber form-control" type="text" value="" />
            <input class="nextMoney form-control" type="text" value="" />
            <a class="del btn btn-danger" href="javascript:;">删除</a>
        </div>
    </div>
    <a class="add btn btn-primary" href="javascript:;">增加</a>
    <a class="sub btn btn-primary" href="javascript:;">提交</a>
    <!-- 模态框（Modal） -->
    <div class="modal" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                </div>
                <input type="radio" name="optionsRadios" value="合肥">合肥
                <input type="radio" name="optionsRadios" value="北京">北京
                <input type="radio" name="optionsRadios" value="上海">上海
                <input type="radio" name="optionsRadios" value="杭州">杭州
                <div class="modal-footer">
                    <button type="button" class="btn btn-default off" onclick="offModal()">关闭
                        </button>
                    <button type="button" class="btn btn-primary modSub">
                            提交更改
                        </button>
                </div>
                <!-- /.modal-content -->
            </div>

            <!-- /.modal -->
        </div>
    </div>
</body>

</html>
<script>
    // 新增
    $('.add').on('click', function() {
        var option = `
        <div class="inputOption">
        <span class="area" href="javascript:;">未添加地区</span>
        <a class="edit btn btn-info" onclick="openModal(this)">编辑</a>
        <input class="firstNumber form-control" type="text" value="" />
        <input class="firstMoney form-control" type="text" value="" />
        <input class="nextNumber form-control" type="text" value="" />
        <input class="nextMoney form-control" type="text" value="" />
        <a class="del btn btn-danger" href="javascript:;">删除</a>
        </div>
        `
        $('.inputContainer').append(option)
    });
    // 删除
    $('.inputContainer').on("click", ".del", function() {
        $(this).parent('.inputOption').remove()
    });
    // 弹出框编辑
    function openModal(e) {
        that = e
        $('#myModal').show();
        $('.inputOption').each(function(i) {
            $('input:radio').each(function(j) {
                if ($('input:radio').eq(j).val() == $('.area').eq(i).text()) {
                    var removeInput = this
                    console.log(removeInput)
                    $(removeInput).attr("disabled", "disabled")
                }
            })
        });
        // 弹出框内提交
        $('.modSub').on('click', function() {
            $(that).siblings('.area').text($('input:radio:checked').val())
            $('input:radio').each(function() {
                $(this).removeAttr('checked', 'checked');
                $(this).removeAttr("disabled", "disabled")
            })
            that = null;
            $('#myModal').hide()
        })
    }

    // 关闭弹出框
    function offModal() {
        $('input:radio').each(function() {
            $(this).removeAttr("disabled", "disabled")
            $(this).removeAttr('checked', 'checked')
        })
        $('#myModal').hide();
        that = null;
    }


    // 总提交
    $('.sub').on('click', function() {
        var list = []
        $('.inputOption').each(function(i) {
            if (($(this).find('.area').text() !== "未添加地区") && ($(this).find('.firstNumber').val() !== "") && ($(this).find('.firstMoney').val() !== "") && ($(this).find('.nextNumber').val() !== "") && ($(this).find('.nextMoney').val() !== "")) {
                var obj = {
                    area: $('.area').eq(i).text(),
                    firstNumber: $('.firstNumber').eq(i).val(),
                    firstMoney: $('.firstMoney').eq(i).val(),
                    nextNumber: $('.nextNumber').eq(i).val(),
                    nextMoney: $('.nextMoney').eq(i).val(),
                    index: i,
                }
                list.push(obj)
            }
        });
        console.log(list)
    })
</script>